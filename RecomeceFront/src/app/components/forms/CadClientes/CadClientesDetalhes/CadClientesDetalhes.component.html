<div class="dialog-component" *ngIf="isLoading == false">
  <div class="row">
    <mat-form-field appearance="fill" class="col-3">
      <mat-label>CPF/CNPJ</mat-label>
      <input matInput [(ngModel)]="formData.inscricao" required name="inscricao" maxlength="18"
        onkeydown="MascaraCnpjCpf(this)" />
    </mat-form-field>

    <mat-form-field appearance="fill" class="col-7">
      <mat-label>Nome</mat-label>
      <input matInput [(ngModel)]="formData.nome" required name="nome" maxlength="300" />
    </mat-form-field>
  </div>
  <div class="row">
    <mat-form-field appearance="fill" class="col-6">
      <mat-label>Email</mat-label>
      <input matInput [(ngModel)]="formData.email" name="email" maxlength="250" />
    </mat-form-field>

    <mat-form-field appearance="fill" class="col-3">
      <mat-label>Telefone</mat-label>
      <input matInput [(ngModel)]="formData.telefone" onkeypress="MascaraTelefone(this)" name="telefoneResponsavel"
        maxlength="30" />
    </mat-form-field>
  </div>
  <div class="row">
    <mat-form-field appearance="fill" class="col-2">
      <mat-label>CEP</mat-label>
      <input matInput [(ngModel)]="formData.cep" name="cep" maxlength="9" onkeypress="MascaraCEP(this)"
        (ngModelChange)="getCEP($event)" />
    </mat-form-field>

    <mat-form-field appearance="fill" class="col-6">
      <mat-label>Logradouro</mat-label>
      <input matInput [(ngModel)]="formData.logradouro" name="logradouro" maxlength="300" />
    </mat-form-field>

    <mat-form-field appearance="fill" class="col-2">
      <mat-label>Nº</mat-label>
      <input matInput [(ngModel)]="formData.numero" name="numero" maxlength="30" />
    </mat-form-field>

  </div>
  <div class="row">
    <mat-form-field appearance="fill" class="col-4">
      <mat-label>Bairro</mat-label>
      <input matInput [(ngModel)]="formData.bairro" name="bairro" maxlength="150" />
    </mat-form-field>
    <mat-form-field appearance="fill" class="col-3">
      <mat-label>Complemento</mat-label>
      <input matInput [(ngModel)]="formData.complemento" name="complemento" maxlength="60" />
    </mat-form-field>
    <mat-form-field appearance="fill" class="col-3">
      <mat-label>Cidade</mat-label>
      <input type="text" matInput [(ngModel)]="cidadeSelecionada" [matAutocomplete]="auto"
        (ngModelChange)="buscarCidades($event)" />

      <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayCidade">
        <mat-option *ngFor="let cidade of cidades" [value]="cidade">
          {{ cidade.texto }}
        </mat-option>
      </mat-autocomplete>
    </mat-form-field>
  </div>
  <div class="row">
    <mat-form-field appearance="fill" class="col-3">
      <mat-label>Estado Civil</mat-label>
      <select matNativeControl required [(ngModel)]="formData.estadoCivil" name="estadoCivil">
        <option value="Solteiro(a)">Solteiro(a)</option>
        <option value="Casado(a)">Casado(a)</option>
        <option value="Divorciado(a)">Divorciado(a)</option>
        <option value="Viuvo(a)">Viuvo(a)</option>
      </select>
    </mat-form-field>
    <mat-form-field appearance="fill" class="col-4">
      <mat-label>Profissão</mat-label>
      <input matInput [(ngModel)]="formData.profissao" name="profissao" maxlength="60" />
    </mat-form-field>
  </div>
  <!-- <div class="row">
    <mat-checkbox color="primary" [(ngModel)]="formData.ativo" name="Ativo" class="">Ativo</mat-checkbox>
  </div> -->
  <div class="btns-dialog-footer mb-4">
    <button mat-raised-button color="primary" (click)="Salvar()">Salvar</button>
  </div>

  <div class="row mt-2" *ngIf="this.isValid == null">
    <mat-divider></mat-divider>
    <h4 class="subtitle-form">Consultas Realizadas</h4>
  </div>

  <div class="grid-container grid-container-mini mt-2" *ngIf="this.isValid == null && this.serasaQuerys?.length > 0">
    <div class="cs-table">
      <div class="cs-table-header cs-table-header-mini">
        <div class="col-2">
          <p>Data</p>
        </div>
        <div class="col-1">
          <p>Score</p>
        </div>
        <div class="col-2">
          <p>Dívida</p>
        </div>
        <div class="col-2">
          <p>Ações</p>
        </div>
      </div>
      <div class="cs-table-body cs-table-body-mini">
        <div class="cs-table-row" *ngFor="let row of this.serasaQuerys">
          <div class="col-2">
            <p>{{this.cc.DataTempoFormatoBr(row.dataHoraConsulta)}}</p>
          </div>
          <div class="col-1 text-right">
            <p>{{row.score}}</p>
          </div>
          <div class="col-2 text-right">
            <p>R$ {{this.cc.MascaraDecimal(row.totalNegativacao)}}</p>
          </div>
          <div class="col-2 grid-actions">
            <p (click)="getDetails(row)" matTooltip="Visualizar consulta">
              <mat-icon>picture_as_pdf</mat-icon>
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row mt-2" *ngIf="this.isValid == null">
    <mat-divider></mat-divider>
    <h4 class="subtitle-form">Propostas</h4>
  </div>

  <div class="grid-container grid-container-mini mt-2" *ngIf="this.isValid == null && this.proposals?.length > 0">
    <div class="cs-table">
      <div class="cs-table-header cs-table-header-mini">
        <div class="col-1">
          <p>Nº Proposta</p>
        </div>
        <div class="col-3">
          <p>Titular</p>
        </div>
        <div class="col-2">
          <p>Data</p>
        </div>
        <div class="col-1">
          <p>Score</p>
        </div>
        <div class="col-2">
          <p>Dívida</p>
        </div>
        <div class="col-2">
          <p>Ações</p>
        </div>
      </div>
      <div class="cs-table-body cs-table-body-mini">
        <div class="cs-table-row" *ngFor="let row of this.proposals">
          <div class="col-1">
            <p>{{row.numeroContrato}}</p>
          </div>
          <div class="col-3">
            <p>{{row.tituar}}</p>
          </div>
          <div class="col-2">
            <p>{{this.cc.DataTempoFormatoBr(row.dataHoraCadastro)}}</p>
          </div>
          <div class="col-1 text-right">
            <p>{{row.score}}</p>
          </div>
          <div class="col-2 text-right">
            <p>R$ {{this.cc.MascaraDecimal(row.valorDivida)}}</p>
          </div>
          <div class="col-2 grid-actions">
            <p (click)="getDetails(row.markID)" matTooltip="Visualizar consulta">
              <mat-icon>picture_as_pdf</mat-icon>
            </p>
            <p (click)="ViewProposal(row.id)" matTooltip="Visualizar proposta">
              <mat-icon>description</mat-icon>
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>